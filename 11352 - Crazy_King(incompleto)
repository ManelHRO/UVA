#include <bits/stdc++.h>
using namespace std;

char mt[102][102];
int larg[102][102]={-1},perm[102][102]={0};
int dx[] = {-1,0,1,0,-1,-1,1,1},dy[] = {0,1,0,-1,1,-1,-1,1},x,y;

void bfs(int linha,int coluna,int sizei,int sizej){
	queue<pair<int,int> >q;
	larg[linha][coluna]=0;
	q.push({linha,coluna});
	
	while(!q.empty()){
		int ax = q.front().first;
		int ay = q.front().second;
		q.pop();
		
		for(int k=0;k<8;k++){
			x=dx[k]+ax;
			y=dy[k]+ay;
			if(x>=0 and x<sizei and y>=0 and y<sizej and mt[x][y]!='Z'){
				if()
				larg[x][y]=larg[ax][ay]+1;
				q.push({x,y});
			}
		}
	}
}

int main(){
	
	char carac;
	int t,m,n,linha,coluna;
	
	cin>>t;
	
	while(t--){
		cin>>m>>n;
		for(int i=0;i<m;i++){
			for(int j=0;j<n;j++){
				cin>>carac;
				mt[i][j]=carac;
				if(carac=='A') linha=i,coluna=j;
			}
		}
		bfs(linha,coluna,m,n);
	}
}
